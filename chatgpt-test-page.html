<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ChatGPT-like Test Page</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #343541;
            color: #ececf1;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .header {
            background-color: #202123;
            padding: 12px 20px;
            border-bottom: 1px solid #4d4d4f;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .header h1 {
            font-size: 16px;
            font-weight: 600;
            color: #ececf1;
        }

        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            max-width: 768px;
            margin: 0 auto;
            width: 100%;
            padding: 0 20px;
        }

        .messages-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px 0;
        }

        .message {
            margin-bottom: 24px;
            display: flex;
            gap: 16px;
        }

        .message.user {
            background-color: #40414f;
            padding: 20px;
            border-radius: 8px;
        }

        .message.assistant {
            background-color: transparent;
            padding: 20px;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            flex-shrink: 0;
        }

        .avatar.user {
            background-color: #5436da;
            color: white;
        }

        .avatar.assistant {
            background-color: #19c37d;
            color: white;
        }

        .message-content {
            flex: 1;
            line-height: 1.6;
        }

        .input-area {
            padding: 20px 0;
            border-top: 1px solid #4d4d4f;
        }

        .input-container {
            position: relative;
            background-color: #40414f;
            border-radius: 12px;
            border: 1px solid #565869;
            max-width: 100%;
        }

        .input-field {
            width: 100%;
            min-height: 52px;
            max-height: 200px;
            padding: 12px 48px 12px 16px;
            background: transparent;
            border: none;
            outline: none;
            color: #ececf1;
            font-size: 16px;
            line-height: 1.5;
            resize: none;
            overflow-y: auto;
        }

        .input-field:focus {
            border-color: #40414f;
        }

        .input-field:empty:before {
            content: "Message ChatGPT...";
            color: #8e8ea0;
            pointer-events: none;
        }

        .send-button {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 28px;
            height: 28px;
            background-color: #19c37d;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }

        .send-button:hover {
            background-color: #1a9c6b;
        }

        .send-button:disabled {
            background-color: #565869;
            cursor: not-allowed;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #565869;
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #6b6c7a;
        }

        /* Test data styling */
        .test-info {
            background-color: #202123;
            border: 1px solid #4d4d4f;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
            font-size: 14px;
            color: #8e8ea0;
        }

        .test-info h3 {
            color: #ececf1;
            margin-bottom: 8px;
        }

        .test-examples {
            margin-top: 12px;
        }

        .test-examples div {
            background-color: #40414f;
            padding: 8px 12px;
            border-radius: 4px;
            margin: 4px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ChatGPT - Privacy Test Page</h1>
    </div>

    <div class="chat-container">
        <div class="messages-area">
            <div class="test-info">
                <h3>🔒 Privacy Extension Test Environment</h3>
                <p>This page mimics ChatGPT's interface for testing the Privately extension. Type sensitive information in the input field below to test detection and highlighting.</p>
                
                <div class="test-examples">
                    <strong>Try typing these examples:</strong>
                    <div>My name is Lim Wei Ming and I live at Block 456 Jurong West Street 41</div>
                    <div>Call me at +65 8765 4321 or email weiming@example.com.sg</div>
                    <div>My credit card is 4111 1111 1111 1111</div>
                    <div>My NRIC is T0987654B and postal code is 640456</div>
                    <div>I work at 1 Marina Bay Sands, Singapore 018956</div>
                    <div>Visit http://google.com or https://github.com</div>
                    <div>Check out www.linkedin.com for networking</div>
                    <div>Go to https://www.facebook.com for updates</div>
                    <div>Check out www.github.com and www.example.org</div>
                </div>
            </div>

            <div class="message assistant">
                <div class="avatar assistant">AI</div>
                <div class="message-content">
                    <p>Hello! I'm ChatGPT. How can I help you today?</p>
                    <p>This is a test environment for the Privately browser extension. Try typing some personal information in the input field below and watch for privacy detection highlights!</p>
                </div>
            </div>

            <div class="message user">
                <div class="avatar user">U</div>
                <div class="message-content">
                    <p>Hi ChatGPT! I want to test the privacy extension.</p>
                </div>
            </div>

            <div class="message assistant">
                <div class="avatar assistant">AI</div>
                <div class="message-content">
                    <p>Great! The Privately extension should automatically detect when you type sensitive information like:</p>
                    <ul style="margin-left: 20px; margin-top: 8px;">
                        <li>Personal names</li>
                        <li>Addresses</li>
                        <li>Phone numbers</li>
                        <li>Email addresses</li>
                        <li>Credit card numbers</li>
                        <li>NRIC/ID numbers</li>
                    </ul>
                    <p style="margin-top: 12px;">Try typing any of these in the input field and you should see Grammarly-style underlines appear!</p>
                </div>
            </div>
        </div>

        <div class="input-area">
            <div class="input-container">
                <div 
                    class="input-field" 
                    contenteditable="true" 
                    data-placeholder="Message ChatGPT..."
                    id="chatInput"
                ></div>
                <button class="send-button" id="sendBtn" disabled>
                    ↑
                </button>
            </div>
        </div>
    </div>

    <script>
        const inputField = document.getElementById('chatInput');
        const sendButton = document.getElementById('sendBtn');
        const messagesArea = document.querySelector('.messages-area');

        // Handle input changes
        inputField.addEventListener('input', function() {
            const hasContent = this.textContent.trim().length > 0;
            sendButton.disabled = !hasContent;
            
            // Auto-resize functionality
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 200) + 'px';
        });

        // Handle Enter key (Send message)
        inputField.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Handle send button click
        sendButton.addEventListener('click', sendMessage);

        function sendMessage() {
            const content = inputField.textContent.trim();
            if (!content) return;

            // Add user message
            addMessage('user', content);
            
            // Clear input
            inputField.textContent = '';
            inputField.style.height = 'auto';
            sendButton.disabled = true;

            // Simulate ChatGPT response after a delay
            setTimeout(() => {
                const responses = [
                    "I can see your message, but I notice the Privately extension might have detected some sensitive information. That's great - it's working as intended to protect your privacy!",
                    "Thank you for testing! The privacy extension should help identify any personal information you might accidentally share. How is the detection working for you?",
                    "Interesting! If you included any personal details in your message, the extension should have highlighted them. This helps prevent accidental data leaks.",
                    "I received your message. Remember, this is a test environment - the Privately extension is designed to catch sensitive data before it gets sent to real services."
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                addMessage('assistant', randomResponse);
            }, 1000);
        }

        function addMessage(type, content) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            
            const avatar = document.createElement('div');
            avatar.className = `avatar ${type}`;
            avatar.textContent = type === 'user' ? 'U' : 'AI';
            
            const messageContent = document.createElement('div');
            messageContent.className = 'message-content';
            
            // Handle line breaks in content
            const paragraphs = content.split('\n').filter(p => p.trim());
            paragraphs.forEach(paragraph => {
                const p = document.createElement('p');
                p.textContent = paragraph;
                messageContent.appendChild(p);
            });
            
            messageDiv.appendChild(avatar);
            messageDiv.appendChild(messageContent);
            
            messagesArea.appendChild(messageDiv);
            
            // Scroll to bottom
            messagesArea.scrollTop = messagesArea.scrollHeight;
        }

        // Handle paste events to maintain formatting
        inputField.addEventListener('paste', function(e) {
            e.preventDefault();
            const text = (e.originalEvent || e).clipboardData.getData('text/plain');
            document.execCommand('insertText', false, text);
        });

        // Placeholder behavior
        inputField.addEventListener('focus', function() {
            if (this.textContent.trim() === '') {
                this.textContent = '';
            }
        });

        inputField.addEventListener('blur', function() {
            if (this.textContent.trim() === '') {
                this.innerHTML = '';
            }
        });

        // Auto-focus on load
        window.addEventListener('load', () => {
            inputField.focus();
        });

        console.log('🤖 ChatGPT-like test page loaded!');
        console.log('💡 Try typing sensitive information to test the Privately extension');
        console.log('🔍 Look for Grammarly-style underlines on detected privacy violations');
    </script>
</body>
</html>
