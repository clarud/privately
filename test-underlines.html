<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privately - Inline Underlines Test</title>
    <style>
        body {
            font-family: system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
            background: #f8f9fa;
        }
        .test-container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        .test-field {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            line-height: 1.5;
            resize: vertical;
            margin-bottom: 20px;
        }
        .test-field:focus {
            outline: none;
            border-color: #2E7D32;
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }
        .content-editable {
            min-height: 120px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            padding: 15px;
            background: white;
            font-size: 16px;
            line-height: 1.5;
        }
        .content-editable:focus {
            outline: none;
            border-color: #2E7D32;
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }
        .instructions {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #2E7D32;
            margin-bottom: 20px;
        }
        .demo-text {
            background: #f0f0f0;
            padding: 15px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 14px;
            margin: 10px 0;
        }
        h2 {
            color: #2E7D32;
            border-bottom: 2px solid #e1e5e9;
            padding-bottom: 10px;
        }
        .feature-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .feature-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }
        .violation-type {
            display: inline-block;
            background: #e3f2fd;
            color: #1976d2;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            margin: 2px;
        }
        .demo-note {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 12px;
            border-radius: 6px;
            margin: 15px 0;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üîí Privately Extension - Inline Underlines Test</h1>
        
        <div class="instructions">
            <strong>‚ú® New Feature: Grammarly-style Privacy Underlines!</strong><br>
            This page tests the new inline underline feature that highlights privacy violations directly in the text, similar to how Grammarly highlights grammar errors.
        </div>

        <div class="feature-list">
            <div class="feature-item">
                <strong>üéØ Hover Effects</strong><br>
                <small>Hover over underlined text to see quick preview tooltips</small>
            </div>
            <div class="feature-item">
                <strong>üñ±Ô∏è Click Actions</strong><br>
                <small>Click underlined violations to access replacement options</small>
            </div>
            <div class="feature-item">
                <strong>üé® Color Coding</strong><br>
                <small>Different violation types have different underline colors and styles</small>
            </div>
            <div class="feature-item">
                <strong>üîß Smart Detection</strong><br>
                <small>Uses >60% confidence threshold and regex-first optimization</small>
            </div>
        </div>

        <h2>üî¨ Violation Type Examples</h2>
        <p>Different privacy violations are styled with distinct underlines:</p>
        
        <div class="violation-type">EMAIL & PHONE</div> - Red dotted (high risk)<br>
        <div class="violation-type">SSN & CREDIT_CARD</div> - Red solid (critical)<br>
        <div class="violation-type">NAME</div> - Yellow dotted (medium risk)<br>
        <div class="violation-type">ADDRESS & URL</div> - Blue dotted (informational)<br>
        <div class="violation-type">DATE</div> - Green dotted (low risk)
    </div>

    <div class="test-container">
        <h2>üìù Test Area 1: Regular Textarea</h2>
        <div class="demo-note">
            <strong>Note:</strong> Regular textarea elements show tooltips but not inline underlines (as they don't support rich text formatting).
        </div>
        
        <textarea class="test-field" placeholder="Type or paste sensitive information here to test detection...">Test sample: My name is John Smith and my email is john.smith@email.com. My phone number is (555) 123-4567 and I live at 123 Main Street, Anytown, CA 12345. My SSN is 123-45-6789.</textarea>
    </div>

    <div class="test-container">
        <h2>‚ú® Test Area 2: Rich Text (ContentEditable)</h2>
        <div class="demo-note">
            <strong>‚ú® This is where the magic happens!</strong> ContentEditable elements support inline underlines. Try typing or pasting the sample text below.
        </div>
        
        <div class="content-editable" contenteditable="true" data-placeholder="Type or paste sensitive information here to see inline underlines...">
            Test the new inline underlines! Try typing: My name is Jane Doe, email jane.doe@company.com, phone (555) 987-6543, address 456 Oak Avenue, Boston, MA 02101.
        </div>

        <div class="demo-text">
            <strong>Copy & Paste Test Data:</strong><br>
            Contact: Dr. Michael Johnson, michael.johnson@university.edu, (617) 555-0123<br>
            Address: 789 University Drive, Cambridge, MA 02139<br>
            SSN: 987-65-4321, Credit Card: 4532-1234-5678-9012<br>
            Website: https://example.com/private-info<br>
            IP Address: 192.168.1.100, MAC: 00:1B:44:11:3A:B7
        </div>
    </div>

    <div class="test-container">
        <h2>üìã Test Area 3: Multiple ContentEditable Blocks</h2>
        
        <h3>Email Draft:</h3>
        <div class="content-editable" contenteditable="true">
            Subject: Personal Information
            
            Hi there, my name is Sarah Wilson and you can reach me at sarah.wilson@email.com or call (555) 234-5678. I live at 321 Pine Street, Seattle, WA 98101.
        </div>

        <h3>Form Data:</h3>
        <div class="content-editable" contenteditable="true">
            Full Name: Robert Anderson
            Email: robert.anderson@company.org
            Phone: (206) 555-7890
            Address: 654 Cedar Lane, Portland, OR 97201
            Date of Birth: 03/15/1985
        </div>

        <h3>Technical Info:</h3>
        <div class="content-editable" contenteditable="true">
            Server Details:
            IP: 10.0.0.15
            MAC: AA:BB:CC:DD:EE:FF
            URL: https://internal.company.com/admin
            Coordinates: 47.6062¬∞ N, 122.3321¬∞ W
        </div>
    </div>

    <div class="test-container">
        <h2>üß™ Testing Instructions</h2>
        <ol>
            <li><strong>Basic Detection:</strong> Type or paste sensitive information in the contenteditable areas above</li>
            <li><strong>Hover Preview:</strong> Hover over any underlined text to see quick preview tooltips</li>
            <li><strong>Click Actions:</strong> Click on underlined violations to access replacement options</li>
            <li><strong>Multiple Types:</strong> Try mixing different violation types to see color-coded underlines</li>
            <li><strong>Real-time Updates:</strong> Edit the text and watch underlines update in real-time</li>
            <li><strong>ONNX Integration:</strong> Test names and addresses to see AI model detection with >60% confidence</li>
        </ol>
        
        <div class="demo-note">
            <strong>üéØ Expected Behavior:</strong><br>
            ‚Ä¢ Immediate underlines appear as you type<br>
            ‚Ä¢ Different colors for different violation types<br>
            ‚Ä¢ Hover shows quick previews<br>
            ‚Ä¢ Click shows action menu (Replace/Allow/Ignore)<br>
            ‚Ä¢ Confidence filtering keeps only >60% predictions
        </div>
    </div>

    <script>
        // Add placeholder behavior for contenteditable elements
        document.querySelectorAll('[contenteditable]').forEach(element => {
            const placeholder = element.dataset.placeholder;
            if (placeholder) {
                function togglePlaceholder() {
                    if (element.textContent.trim() === '') {
                        element.classList.add('empty');
                        if (!element.querySelector('.placeholder')) {
                            const span = document.createElement('span');
                            span.className = 'placeholder';
                            span.style.color = '#999';
                            span.style.fontStyle = 'italic';
                            span.textContent = placeholder;
                            element.appendChild(span);
                        }
                    } else {
                        element.classList.remove('empty');
                        const placeholderEl = element.querySelector('.placeholder');
                        if (placeholderEl) {
                            placeholderEl.remove();
                        }
                    }
                }
                
                element.addEventListener('focus', () => {
                    const placeholderEl = element.querySelector('.placeholder');
                    if (placeholderEl) {
                        placeholderEl.remove();
                    }
                });
                
                element.addEventListener('blur', togglePlaceholder);
                element.addEventListener('input', togglePlaceholder);
                
                // Initial check
                togglePlaceholder();
            }
        });
        
        console.log('üß™ Inline underlines test page loaded');
        console.log('üìä Testing contenteditable elements:', document.querySelectorAll('[contenteditable]').length);
    </script>
</body>
</html>
